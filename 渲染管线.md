# 渲染管线

## Vertex Shader

### 坐标变换

* **局部坐标 -> 世界坐标**

  顶点坐标乘以模型矩阵变换到世界空间

  平移、旋转、缩放、错切、刚体（平移和旋转的级联）、法线变换https://blog.csdn.net/shenghuaDay/article/details/73611392?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_baidulandingword-2&spm=1001.2101.3001.4242

* **世界坐标 -> 观察坐标**

  观察矩阵（摄像机位置、目标点、向上的方向向量）

* **观察坐标 -> 裁剪坐标**

  投影矩阵（正交投影、透视投影）

* 裁剪坐标 -> 标准设备空间（NDC）

  透射除法

* NDC -> 窗口坐标
  视口变换
## 曲面细分着色器

* 可选阶段

* 由外壳着色器、镶嵌器和域着色器组成，用于增加三角面片数量

## 几何着色器
* 可选阶段
* 创建和销毁几何图元 将一个顶点扩展两个三角面片
## 图元组装

### 裁剪

部分位于视锥体内的图元，需要进行裁剪

* **Cohen-Sutherland算法（线段裁剪算法）**

  线段裁剪，对窗口周围和窗口分为九个位置区域，进行四位编码，0000，0001，... 然后对线段的两顶点进行&运算，得到0就保留，有1就舍去线段。

  缺点：全部舍弃的判断只适合于那些仅在窗口同一侧（后左、或右、或上、或下）的线段。

* **Liang-Barsky算法 （直线线段裁剪算法）**

  上一个算法的改进，https://www.cnblogs.com/cnblog-wuran/p/9813841.html

* **Sutherland-Hodgman多边形裁剪算法**

  只能裁剪凸多边形

  基本思想：一次用窗口的一边裁剪多边形https://blog.csdn.net/qq_40310876/article/details/90742143